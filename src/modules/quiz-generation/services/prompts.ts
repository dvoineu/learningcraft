/**
 * AI prompt templates for quiz generation
 */

import type { QuizDifficulty, QuizSubject } from '@/core/config/constants';

const DIFFICULTY_INSTRUCTIONS: Record<QuizDifficulty, string> = {
  easy: 'Вопросы должны быть простыми, проверять базовое понимание материала. Подходят для начинающих.',
  medium: 'Вопросы должны быть среднего уровня сложности, требовать понимания основных концепций и их применения.',
  hard: 'Вопросы должны быть сложными, требовать глубокого понимания материала, анализа и синтеза информации.',
};

export function generateQuizPrompt(
  text: string,
  subject: QuizSubject,
  difficulty: QuizDifficulty,
  questionCount: number
): string {
  const language = subject === 'Беларуская мова' ? 'беларускай' : 'русском';
  
  return `Ты - эксперт по созданию образовательных тестов для подготовки к ЦТ (Централизованное Тестирование) в Беларуси.

ЗАДАЧА:
Создай ${questionCount} тестовых вопросов по предмету "${subject}" на основе предоставленного материала.

МАТЕРИАЛ ДЛЯ АНАЛИЗА:
${text.substring(0, 6000)}

ТРЕБОВАНИЯ:
1. Язык: Все вопросы и ответы должны быть на ${language} языке
2. Сложность: ${DIFFICULTY_INSTRUCTIONS[difficulty]}
3. Формат: Каждый вопрос должен иметь ровно 4 варианта ответа (A, B, C, D)
4. Правильный ответ: Только ОДИН вариант должен быть правильным
5. Релевантность: Вопросы должны быть основаны ТОЛЬКО на предоставленном материале
6. Качество: Вопросы должны быть четкими, однозначными и проверять понимание материала

ФОРМАТ ОТВЕТА (строго JSON):
{
  "questions": [
    {
      "question_text": "Текст вопроса",
      "options": [
        {"letter": "A", "text": "Вариант A", "isCorrect": false},
        {"letter": "B", "text": "Вариант B", "isCorrect": true},
        {"letter": "C", "text": "Вариант C", "isCorrect": false},
        {"letter": "D", "text": "Вариант D", "isCorrect": false}
      ],
      "correct_answer": "B",
      "explanation": "Краткое объяснение (1-2 предложения)"
    }
  ]
}

ВАЖНО:
- Ответ должен быть ТОЛЬКО валидным JSON, без дополнительного текста
- Все поля обязательны
- Ровно ${questionCount} вопросов
- Каждый вопрос имеет ровно 4 варианта ответа
- Только один правильный ответ на вопрос
- Объяснения должны быть краткими (1-2 предложения)
- Варианты ответов должны быть короткими и четкими`;
}
